@model lampbae_final_project.Models.Friend

@{
    ViewBag.Title = "Create";
}
<body background="/Content/Images/lampbaeglow.jpg">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal" align="center">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                <div class="col-md-10">
                    <input type="hidden" name="UserID1" value="@User.Identity.Name" />
                </div>
            </div>

            <div class="form-group">
                <label>Your Friend's Email</label>
                @Html.EditorFor(model => model.UserID2, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.UserID2, "", new { @class = "text-danger" })

            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Add A New Friend" class="btn btn-default" />
                </div>
            </div>
        </div>
    }

    <div align="center">
        @Html.ActionLink("Back to List", "Index")
    </div>


    @*Friend Email:
    <input type="text" id="email" class="form-control"
           oninput="search()" />
    <table class="table table-striped" id="friends"></table>
    <script type="text/javascript"
            src="~/Scripts/jquery-1.10.2.min.js"></script>
    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
    </body>
    <script>
        function search() {
            $.ajax(
                {
                    type: 'POST',
                    url: '/Friends/GetFriendsByEmail',
                    data: '{email: "' + document.getElementById("email").value
                        + '"}',
                    contentType: 'application/json; charset-utf-8',
                    dataType: 'json',
                    success:
                        function (response) {
                            var tableHTML = "<tr><th></th>";
                            for (var i = 0; i < response.length; i++) {
                                var Friend = response[i];
                                var tr = "<tr><td>" + Friend.Email
                                    + "</tr>";
                                tableHTML += tr;
                            }
                            document.getElementById("friends")
                                .innerHTML = tableHTML;
                        },
                    failure: function (response) {
                        alert("Failure" + response.responseText);
                    },
                    error: function (response) {
                        alert("Error" + response.responseText);
                    }
                }

            );
        }

    </script>*@
